box: matsen/pplacer-build-env

build:
    steps:
        - script:
            name: build pplacer
            code: make zip && make test && make docs

    after-steps:
        - slack-notifier:
            url: $SLACK_URL
            channel: microbiome
            username: pplacer build
        - script:
            name: upload pplacer
            code: make upload && curl -X POST --data-urlencode 'payload={"text": "Latest pplacer uploaded to '$(cat .latest-upload)'"}' $SLACK_URL

deploy:
    steps:
        - ematsen/gh-pages:
            token: $GITHUB_TOKEN
            repo: matsen/pplacer
            path: docs/_build/html

    after-steps:
        - slack-notifier:
            url: $SLACK_URL
            channel: microbiome
            username: pplacer docs deploy


